import{e as t,a as e,J as n,L as i,K as r,i as s,b as a,n as o,f as h,O as c,G as u,w as p,h as d,j as l,k as f,I as $,S as g,s as m,c as v,m as w,M as y,t as b,d as W,g as x,a8 as T,a9 as j,ap as k,C as A,ai as D,ag as C}from"./index-5ccbbe7f.js";import{T as I,I as R,B as O}from"./businesser-80c7f9bd.js";import{A as P}from"./AppBarFragment-1d803fc2.js";function _(c){var u,p;return{c(){u=t("component"),p=t("container"),e(p,"class","bar svelte-97b1jj"),n(u,"--height",i.parse(c[7])),n(u,"--width",i.parse(c[8])),n(u,"--percent",c[4]+"%"),n(u,"--transition-duration",i.parse(c[3])),e(u,"class","svelte-97b1jj"),r(u,"indefinite",c[6])},m(t,e){s(t,u,e),a(u,p),c[12](u)},p(t,e){var[s]=e;128&s&&n(u,"--height",i.parse(t[7])),256&s&&n(u,"--width",i.parse(t[8])),16&s&&n(u,"--percent",t[4]+"%"),8&s&&n(u,"--transition-duration",i.parse(t[3])),64&s&&r(u,"indefinite",t[6])},i:o,o:o,d(t){t&&h(u),c[12](null)}}}function H(t,e,n){var i,r,s,a,h=o,d=()=>(h(),h=c(v,(t=>n(4,r=t))),v),l=o,f=()=>(l(),l=c(y,(t=>n(7,s=t))),y),$=o,g=()=>($(),$=c(W,(t=>n(8,a=t))),W);t.$$.on_destroy.push((()=>h())),t.$$.on_destroy.push((()=>l())),t.$$.on_destroy.push((()=>$()));var{percent:m=-1}=e,{percentW:v=u(m)}=e;d();var{height:w=24}=e,{heightW:y=u(w)}=e;f();var{width:b="100%"}=e,{widthW:W=u(b)}=e;g();var x,{transitionDuration:T="0.5s"}=e;return t.$$set=t=>{"percent"in t&&n(9,m=t.percent),"percentW"in t&&d(n(0,v=t.percentW)),"height"in t&&n(10,w=t.height),"heightW"in t&&f(n(1,y=t.heightW)),"width"in t&&n(11,b=t.width),"widthW"in t&&g(n(2,W=t.widthW)),"transitionDuration"in t&&n(3,T=t.transitionDuration)},t.$$.update=()=>{16&t.$$.dirty&&n(6,i=r<0)},[v,y,W,T,r,x,i,s,a,m,w,b,function(t){p[t?"unshift":"push"]((()=>{n(5,x=t)}))}]}class Progress extends d{constructor(t){super(),l(this,t,H,_,f,{percent:9,percentW:0,height:10,heightW:1,width:11,widthW:2,transitionDuration:3})}get percent(){return this.$$.ctx[9]}set percent(t){this.$set({percent:t}),$()}get percentW(){return this.$$.ctx[0]}set percentW(t){this.$set({percentW:t}),$()}get height(){return this.$$.ctx[10]}set height(t){this.$set({height:t}),$()}get heightW(){return this.$$.ctx[1]}set heightW(t){this.$set({heightW:t}),$()}get width(){return this.$$.ctx[11]}set width(t){this.$set({width:t}),$()}get widthW(){return this.$$.ctx[2]}set widthW(t){this.$set({widthW:t}),$()}get transitionDuration(){return this.$$.ctx[3]}set transitionDuration(t){this.$set({transitionDuration:t}),$()}}function B(n){var i,r,a,c,u,p,d,l,f,$,T,j,k,A;return a=new g({props:{height:56}}),d=new g({props:{height:56}}),{c(){(i=t("heading")).innerHTML='You&#39;ll need to verify your identify before you&#39;re able to enjoy <span class="anan svelte-5l48fo">Anan</span>.',r=m(),v(a.$$.fragment),c=m(),(u=t("string")).innerHTML="This is to prevent abuse by bad actors, since sensitive information is being flown around.\n\t\t\t\t<br/> \n\t\t\t\t<br/> \n\t\t\t\t<b>HACKATHON:</b> This flow is mostly stubbed for your convenience. Just submit any picture &amp; it&#39;ll approve you.",p=m(),v(d.$$.fragment),l=m(),(f=t("string")).textContent="Upload an image of your IC.",$=m(),T=t("input"),e(i,"class","svelte-5l48fo"),e(T,"class","file"),e(T,"type","file")},m(t,e){s(t,i,e),s(t,r,e),w(a,t,e),s(t,c,e),s(t,u,e),s(t,p,e),w(d,t,e),s(t,l,e),s(t,f,e),s(t,$,e),s(t,T,e),j=!0,k||(A=y(T,"change",n[1]),k=!0)},p:o,i(t){j||(b(a.$$.fragment,t),b(d.$$.fragment,t),j=!0)},o(t){W(a.$$.fragment,t),W(d.$$.fragment,t),j=!1},d(t){t&&h(i),t&&h(r),x(a,t),t&&h(c),t&&h(u),t&&h(p),x(d,t),t&&h(l),t&&h(f),t&&h($),t&&h(T),k=!1,A()}}}function L(n){var i,r,a,c,u,p;return a=new g({props:{height:56}}),u=new Progress({props:{percent:-1}}),{c(){(i=t("heading")).textContent="This won't take long (;",r=m(),v(a.$$.fragment),c=m(),v(u.$$.fragment),e(i,"class","svelte-5l48fo")},m(t,e){s(t,i,e),s(t,r,e),w(a,t,e),s(t,c,e),w(u,t,e),p=!0},p:o,i(t){p||(b(a.$$.fragment,t),b(u.$$.fragment,t),p=!0)},o(t){W(a.$$.fragment,t),W(u.$$.fragment,t),p=!1},d(t){t&&h(i),t&&h(r),x(a,t),t&&h(c),x(u,t)}}}function M(n){var i,r,a,o,c=[L,B],u=[];function p(t,e){return t[0]?0:1}return r=p(n),a=u[r]=c[r](n),{c(){i=t("container"),a.c(),e(i,"class","content svelte-5l48fo")},m(t,e){s(t,i,e),u[r].m(i,null),o=!0},p(t,e){var n=r;(r=p(t))===n?u[r].p(t,e):(T(),W(u[n],1,1,(()=>{u[n]=null})),j(),(a=u[r])?a.p(t,e):(a=u[r]=c[r](t)).c(),b(a,1),a.m(i,null))},i(t){o||(b(a),o=!0)},o(t){W(a),o=!1},d(t){t&&h(i),u[r].d()}}}function S(t){var e,n;return e=new P({props:{isPadded:!0,isInAnimated:!0,isOutAnimated:!0,height:"100vh",width:"100%",align:"flex-start",justify:"center",appBarComponent:k,$$slots:{default:[M]},$$scope:{ctx:t}}}),{c(){v(e.$$.fragment)},m(t,i){w(e,t,i),n=!0},p(t,n){var[i]=n,r={};33&i&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){x(e,t)}}}function E(t,e,n){var i,r=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{h(i.next(t))}catch(t){s(t)}}function o(t){try{h(i.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))},s=!1;return(null===(i=A.pingItem)||void 0===i?void 0:i.token)||(window.history.back(),window.history.length<2&&(A.globalToasts=[I.from({duration:-1,text:"No token found! Are you sure you're supposed to be here?",level:D.ERROR}),...A.globalToasts])),[s,function(t){var e,i;return r(this,void 0,void 0,(function*(){n(0,s=!0);var r=new FormData,a=null===(e=t.currentTarget.files)||void 0===e?void 0:e[0];if(null!=a){r.append("token",A.pingItem.token),r.append("ic",a);try{(yield(yield fetch("http://anan-server.herokuapp.com/api/v1/verify/submit/ic",{method:"POST",body:r})).json()).name===R.name&&(O.createGlobalSocket(null===(i=A.pingItem)||void 0===i?void 0:i.token),yield C("/walkthrough"))}catch(t){console.error(t),A.globalToasts=[I.from({text:"Ah crap, something happened. Could ya refresh & try again?",level:D.ERROR}),...A.globalToasts]}}}))}]}export default class VerifyRoute extends d{constructor(t){super(),l(this,t,E,S,f,{})}}
